import type { LayoutServerLoad } from './$types';
import { getBackend } from '$lib/backend';
import type { User } from 'src/types.d.ts';

export const load: LayoutServerLoad = async ({ cookies }) => {
	let user: User = {
		loggedIn: false,
		email: ''
	};
	if (cookies.get('accessToken')) {
		user = await getBackend('/api/user/me', cookies.get('accessToken'));
		user.loggedIn = true;
	}
	return user;
};
